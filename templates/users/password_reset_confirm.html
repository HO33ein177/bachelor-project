{% extends 'base.html' %}
{% load static %}
{% block title %}رمز عبور جدید را وارد کنید{% endblock %}
{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/login.css' %}">
<style>
    body { direction: rtl; }
    .wrapper {
        max-width: 500px;
        margin: 20px auto;
        text-align: right;
    }
    .input-field label { right: 0; left: auto; }
    .errors {
        color: #ffdddd;
        text-align: right;
        font-size: 0.9em;
        margin-top: -10px;
        margin-bottom: 10px;
    }
    .help-text {
        color: #cccccc;
        text-align: right;
        font-size: 0.8em;
        margin-top: -10px;
        margin-bottom: 10px;
    }
    .info { color: #eee; line-height: 1.6; }
    .invalid-link { color: #f44336; line-height: 1.6; }
    .resend-link { color: #efefef; text-decoration: underline; }
    button { margin-top: 20px; }
</style>
{% endblock %}
{% block content %}
<div class="wrapper">
    <h2>رمز عبور جدید را وارد کنید</h2>
    {% if validlink %}
        <p class="info">لطفاً رمز عبور جدید خود را دو بار وارد کنید تا از صحت آن اطمینان حاصل شود.</p>
        <form method="post">
            {% csrf_token %}
            {% comment %} Render the new password form provided by Django {% endcomment %}
             {% for field in form %}
                <div class="input-field">
                    {{ field }}
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                </div>
                  {% if field.errors %}
                    <div class="errors">{{ field.errors }}</div>
                {% endif %}
                {% if field.help_text %}
                    <div class="help-text">{{ field.help_text }}</div>
                {% endif %}
            {% endfor %}
            <button type="submit">تغییر رمز عبور</button>
        </form>
    {% else %}
        <p class="invalid-link">متاسفانه لینک بازیابی رمز عبور نامعتبر است. این ممکن است به این دلیل باشد که لینک قبلاً استفاده شده یا منقضی شده است.</p>
        <br>
        <a href="{% url 'users:password_reset' %}" class="resend-link">درخواست مجدد لینک بازیابی رمز عبور</a>
    {% endif %}
</div>
{% endblock %}